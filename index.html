<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ImpulseCheck</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ImpulseCheck">

    <style>
        /* Basic setup for the whole page */
        :root {
            --primary-color: #007aff; /* A nice, friendly blue */
            --danger-color: #d9534f;
            --light-gray: #f4f7f6;
            --dark-gray: #333;
            --text-gray: #555;
            --white: #ffffff;
            --border-color: #ddd;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--light-gray);
            color: var(--dark-gray);
            margin: 0;
            padding: 20px;
        }

        /* Main app container */
        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        /* App title */
        h1 {
            text-align: center;
            color: var(--dark-gray);
        }

        /* Each feature (calculator, tracker) is a "card" */
        .card {
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 25px;
        }

        h2 {
            margin-top: 0;
            color: var(--primary-color);
            border-bottom: 2px solid var(--light-gray);
            padding-bottom: 10px;
        }

        /* Styling for form groups (label + input) */
        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-gray);
        }

        /* Styling for all inputs and dropdowns */
        input[type="number"],
        input[type="text"],
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
        }

        /* Main action button */
        button {
            width: 100%;
            padding: 15px;
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        /* Red button for "Clear All" */
        button.danger {
            background-color: var(--danger-color);
            margin-top: 10px;
        }

        button.danger:hover {
            background-color: #c9302c;
        }

        /* The result box for the calculator */
        #result {
            display: none; /* Hidden until a calculation is made */
            margin-top: 20px;
            padding: 20px;
            background-color: #e6f7ff;
            border-left: 5px solid var(--primary-color);
            font-size: 1.1em;
            font-weight: 600;
            border-radius: 0 8px 8px 0;
        }
        
        #result.error {
            background-color: #ffebee;
            border-left-color: var(--danger-color);
        }

        /* Styling for the expense list */
        #expenseList {
            list-style-type: none;
            padding: 0;
            margin-top: 20px;
        }

        #expenseList li {
            background: #f9f9f9;
            border: 1px solid #eee;
            padding: 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 16px;
        }

        #expenseList li .item-name {
            font-weight: 600;
        }
        #expenseList li .item-amount {
            font-weight: 600;
            color: var(--danger-color);
        }

        /* Total spending display */
        .total-display {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid var(--light-gray);
            text-align: right;
            font-size: 1.2em;
            font-weight: 700;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            color: #888;
            font-size: 0.9em;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>ImpulseCheck</h1>

        <div class="card">
            <h2>Worth the Hours?</h2>
            <p>Check an item's cost in your work hours.</p>

            <div class="form-group">
                <label for="income">Your Income ($)</label>
                <input type="number" id="income" placeholder="e.g., 52000">
            </div>

            <div class="form-group">
                <label for="incomeType">Income Frequency</label>
                <select id="incomeType">
                    <option value="yearly">Per Year</option>
                    <option value="monthly">Per Month</option>
                    <option value="weekly">Per Week</option>
                    <option value="hourly">Per Hour</option>
                </select>
            </div>

            <div class="form-group">
                <label for="itemCost">Cost of Item ($)</label>
                <input type="number" id="itemCost" placeholder="e.g., 100">
            </div>

            <button id="calculateBtn">Check Impulse</button>

            <div id="result"></div>
        </div>

        <div class="card">
            <h2>Track Your Spending</h2>
            
            <form id="spendingForm">
                <div class="form-group">
                    <label for="spendItem">What did you buy?</label>
                    <input type="text" id="spendItem" placeholder="e.g., Coffee, Lunch, etc.">
                </div>
                <div class="form-group">
                    <label for="spendAmount">Amount ($)</label>
                    <input type="number" id="spendAmount" placeholder="e.g., 5.00">
                </div>
                <button type="submit">Log Expense</button>
            </form>

            <ul id="expenseList">
                </ul>

            <div class="total-display">
                Total Spent: $<span id="totalSpent">0.00</span>
            </div>
            
            <button id="clearBtn" class="danger">Clear All Expenses</button>
        </div>
        
        <footer>
            <p>Made with ImpulseCheck</p>
        </footer>
    </div>

    <script>
        // This waits for the entire page to load before running any code
        document.addEventListener('DOMContentLoaded', () => {

            // --- Calculator Feature ---

            // Get the HTML elements for the calculator
            const calculateBtn = document.getElementById('calculateBtn');
            const incomeInput = document.getElementById('income');
            const incomeTypeSelect = document.getElementById('incomeType');
            const itemCostInput = document.getElementById('itemCost');
            const resultDiv = document.getElementById('result');

            // Listen for a click on the "Check Impulse" button
            calculateBtn.addEventListener('click', () => {
                // Read the values from the form
                const income = parseFloat(incomeInput.value);
                const cost = parseFloat(itemCostInput.value);
                const type = incomeTypeSelect.value;

                // Check for valid numbers
                if (isNaN(income) || isNaN(cost) || income <= 0 || cost <= 0) {
                    resultDiv.innerHTML = 'Please enter a valid income and cost.';
                    resultDiv.className = 'error'; // Add error style
                    resultDiv.style.display = 'block';
                    return;
                }

                let hourlyWage = 0;
                
                // Calculate the hourly wage based on the frequency
                switch (type) {
                    case 'hourly':
                        hourlyWage = income;
                        break;
                    case 'weekly':
                        hourlyWage = income / 40; // Assuming 40-hour work week
                        break;
                    case 'monthly':
                        hourlyWage = income / 173.33; // Avg. work hours in a month
                        break;
                    case 'yearly':
                        hourlyWage = income / 2080; // 40 hours/week * 52 weeks
                        break;
                }
                
                // Calculate the final time cost
                const hours = (cost / hourlyWage).toFixed(2);

                // Display the result
                resultDiv.innerHTML = `This item costs <strong>${hours} hours</strong> of your work.`;
                resultDiv.className = ''; // Remove error style
                resultDiv.style.display = 'block';
            });


            // --- Spending Tracker Feature ---

            // Get the HTML elements for the tracker
            const spendingForm = document.getElementById('spendingForm');
            const spendItemInput = document.getElementById('spendItem');
            const spendAmountInput = document.getElementById('spendAmount');
            const expenseList = document.getElementById('expenseList');
            const totalSpentEl = document.getElementById('totalSpent');
            const clearBtn = document.getElementById('clearBtn');
            
            // Try to load saved expenses from the phone's local storage
            let expenses = JSON.parse(localStorage.getItem('expenses')) || [];

            // Function to save the expense list to local storage
            function saveExpenses() {
                localStorage.setItem('expenses', JSON.stringify(expenses));
            }

            // Function to update the list and total on the screen
            function updateUI() {
                // Clear the current list
                expenseList.innerHTML = '';
                
                let total = 0;
                
                // Loop through all expenses and add them to the list
                expenses.forEach(expense => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <span class="item-name">${expense.item}</span>
                        <span class="item-amount">-$${expense.amount.toFixed(2)}</span>
                    `;
                    expenseList.appendChild(li);
                    
                    // Add to the total
                    total += expense.amount;
                });
                
                // Update the total display
                totalSpentEl.innerText = total.toFixed(2);
            }

            // Listen for the "Log Expense" form submission
            spendingForm.addEventListener('submit', (e) => {
                e.preventDefault(); // Stop the page from reloading
                
                const item = spendItemInput.value;
                const amount = parseFloat(spendAmountInput.value);

                // Validate the input
                if (item === '' || isNaN(amount) || amount <= 0) {
                    alert('Please enter a valid item and amount.');
                    return;
                }

                // Create a new expense object
                const expense = {
                    id: Date.now(), // Simple unique ID
                    item: item,
                    amount: amount
                };
                
                // Add new expense to the front of the list
                expenses.unshift(expense);
                
                saveExpenses(); // Save to local storage
                updateUI();     // Update the screen

                // Clear the form fields
                spendItemInput.value = '';
                spendAmountInput.value = '';
            });

            // Listen for a click on the "Clear All" button
            clearBtn.addEventListener('click', () => {
                // Ask for confirmation
                if (confirm('Are you sure you want to clear all expenses? This cannot be undone.')) {
                    expenses = [];      // Empty the array
                    saveExpenses();     // Save the empty array
                    updateUI();         // Update the screen
                }
            });

            // Load saved expenses and update the UI when the app first starts
            updateUI();
        });
    </script>
</body>
</html>